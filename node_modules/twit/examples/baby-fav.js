//
//  twitter test
//
var Twit = require('../lib/twitter');
var config1 = require("../config1");
 
var Bot = module.exports = function(config) { 
  this.twit = new Twit(config);
};

var bot = new Bot(config1);
var intervalInSeconds = 10;

Bot.prototype.printTweet = function (params, callback) {
  var self = this;
 
  self.twit.get('statuses/user_timeline', params, function (err, reply) {
    if(err) {
      return callback(err);
    }

    var tweets = reply;
    console.log (tweets);

    if (tweets[0].text.search('cough') > -1){
      self.twit.post('favorites/create', { id: tweets[0].id_str }, callback);
      self.twit.post('statuses/retweet', { id: tweets[0].id_str }, callback);
    }

  });
};

var params = {
	screen_name: "dabidtesting",
	count: "1"
};

var job = function(){
  bot.printTweet (params, function(err, reply) {
  console.log ("hi " + err);
  });
}

setInterval(job, intervalInSeconds * 1000);